FROM node

ARG PORT
ARG FRONTEND_ORIGIN
ARG MYSQL_URL
ARG NODEMAILER_EMAIL
ARG NODEMAILER_PASSWORD
ARG JWT_SECRET
ARG NODEMAILER_SECRET

WORKDIR /code
COPY package*.json ./
RUN npm install
COPY . .
RUN npx prisma generate
RUN npm run build
CMD [ "npm", "start"]